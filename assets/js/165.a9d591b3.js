(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{208:function(t,n,s){"use strict";s.r(n);var e=s(0),a=Object(e.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("(推荐第三种)")]),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("利用react-loadable这个高级组件，要做到实现按需加载这一点，我们将使用的WebPack，babel-plugin-syntax-dynamic-import和react-loadable。")]),t._v(" "),s("p",[t._v("webpack内置了对动态导入的支持; 但是，如果使用Babel（将JSX编译为JavaScript），那么将需要使用babel-plugin-syntax-dynamic-import插件。这是一个仅用于语法的插件，这意味着Babel不会做任何额外的转换。该插件只是允许Babel解析动态导入，因此webpack可以将它们捆绑为代码分割。")]),t._v(" "),t._m(2),s("p",[t._v("react-loadable是用于通过动态导入加载组件的高阶组件。")]),t._v(" "),t._m(3),s("p",[s("a",{attrs:{href:"https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/docs/guides/code-splitting.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/docs/guides/code-splitting.md"),s("OutboundLink")],1)]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("在router3中的按需加载方式")]),t._v(" "),s("p",[t._v("route3中实现按需加载只需要按照下面代码的方式实现就可以了。")]),t._v(" "),t._m(5),s("p",[t._v("在router4以前，我们是使用getComponent的的方式来实现按需加载，getComponent是异步的，只有在路由匹配时才会调用,router4中，getComponent方法已经被移除，所以这种方法在router4中不能使用。")]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("create-react-app文档给的react-router按需加载实现：")]),t._v(" "),s("p",[t._v("本人在自己利用webpack+dva+antd+…的多页应用项目中使用的这个方法，相对简单好用。但是有人指出性能上不如Bundle组件（在react-router 4官网上的一个代码拆分的例子），那个人好像还是Create-react-app的主要贡献者。")]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[t._v("第一步：创建一个异步组件")])],1),t._v(" "),t._m(7),s("p",[s("font",{attrs:{color:"red"}},[t._v("第二步：使用异步组件：我们将使用asyncComponent动态导入我们想要的组件。")])],1),t._v(" "),t._m(8),t._m(9),s("p",[t._v("这样就可以了，已经做好代码分片的处理了，你可以npm run build 在build目录下看到一些.chunk.js的文件，就是咱们import()的不同动态调用。")]),t._v(" "),s("p",[t._v("最后在开发者工具中打开network验证.chunk.js的加载效果")]),t._v(" "),s("Valine")],1)},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"react-router的3种路由按需加载介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-router的3种路由按需加载介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" react-router的3种路由按需加载介绍")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"第一种："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一种：","aria-hidden":"true"}},[this._v("#")]),this._v(" 第一种：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('.babelrc:{\n\t"presets":[\n\t\t"react"\n\t],\n\t"plugins":[\n\t\t"syntax-dynamic-import"\n\t] \n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import Loadable from 'react-loadable';\nimport Loading from './Loading';\n\nconst LoadableComponent = Loadable({\n\tloader: () => import('./Dashboard'),\n\tloading: Loading,\n})\n\nexport default class LoadableDashboard extends React.Component {\n\trender() {\n\t\treturn <LoadableComponent />;\n\t}\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"第二种："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二种：","aria-hidden":"true"}},[this._v("#")]),this._v(" 第二种：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const about = (location, cb) => {\n\trequire.ensure([], require => {\n\t\tcb(null, require('../Component/about').default)\n\t},'about')\n}\n\n//配置route\n<Route path=\"helpCenter\" getComponent={about} />\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"第三种："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三种：","aria-hidden":"true"}},[this._v("#")]),this._v(" 第三种：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('//创建文件src/components/AsyncComponent.js\n\nimport React, { Component } from "react";\nexport default function asyncComponent(importComponent) {\n\tclass AsyncComponent extends Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tcomponent: null\n\t\t\t};\n\t\t}\n\n\t\tasync componentDidMount() {\n\t\t\tconst { default: component } = await importComponent();\n\t\t\tthis.setState({\n\t\t\t\tcomponent: component\n\t\t\t});\n\t\t}\n\n\t\trender() {\n\t\t\tconst C = this.state.component;\n\t\t\treturn C ? <C {...this.props} /> : null;\n\t\t}\n\t}\n\t\n\treturn AsyncComponent;\n\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('const AsyncHome = asyncComponent(() => import("./containers/Home"));\n')])]),this._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[this._v("1")]),n("br")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('//src/Routes.js：\n\nimport React from "react";\nimport { Route, Switch } from "react-router-dom";\nimport asyncComponent from "./components/AsyncComponent";\nimport AppliedRoute from "./components/AppliedRoute";\nimport AuthenticatedRoute from "./components/AuthenticatedRoute";\nimport UnauthenticatedRoute from "./components/UnauthenticatedRoute";\n\nconst AsyncHome = asyncComponent(() => import("./containers/Home"));\nconst AsyncLogin = asyncComponent(() => import("./containers/Login"));\nconst AsyncNotes = asyncComponent(() => import("./containers/Notes"));\nconst AsyncSignup = asyncComponent(() => import("./containers/Signup"));\nconst AsyncNewNote = asyncComponent(() => import("./containers/NewNote"));\nconst AsyncNotFound = asyncComponent(() => import("./containers/NotFound"));\n\nexport default ({ childProps }) =>\n\t<Switch>\n\t\t<AppliedRoute\n\t\t\tpath="/"\n\t\t\texact\n\t\t\tcomponent={AsyncHome}\n\t\t\tprops={childProps}\n\t\t/>\n\t\t<UnauthenticatedRoute\n\t\t\tpath="/login"\n\t\t\texact\n\t\t\tcomponent={AsyncLogin}\n\t\t\tprops={childProps}\n\t\t/>\n\t\t<UnauthenticatedRoute\n\t\t\tpath="/signup"\n\t\t\texact\n\t\t\tcomponent={AsyncSignup}\n\t\t\tprops={childProps}\n\t\t/>\n\t\t<AuthenticatedRoute\n\t\t\tpath="/notes/new"\n\t\t\texact\n\t\t\tcomponent={AsyncNewNote}\n\t\t\tprops={childProps}\n\t\t/>\n\t\t<AuthenticatedRoute\n\t\t\tpath="/notes/:id"\n\t\t\texact\n\t\t\tcomponent={AsyncNotes}\n\t\t\tprops={childProps}\n\t\t/>\n\n\t\t{/* Finally, catch all unmatched routes */}\n\n\t\t<Route component={AsyncNotFound} />\n\t</Switch>\n\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br")])])}],!1,null,null,null);n.default=a.exports}}]);