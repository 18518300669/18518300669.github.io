(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{196:function(e,r,t){"use strict";t.r(r);var s=t(0),n=Object(s.a)({},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),t("p",[e._v("在webpack 2的官网上写了这么一句话：")]),e._v(" "),t("p",[t("font",{attrs:{color:"red"}},[e._v("require.ensure() is specific to webpack and superseded by import().")])],1),e._v(" "),t("p",[e._v("所以，在webpack 2里面应该是不建议使用require.ensure()这个方法的。但是目前该方法仍然有效，所以可以简单介绍一下。包括在webpack 1中也是可以使用。下面是require.ensure()的语法：")]),e._v(" "),e._m(2),t("p",[e._v("require.ensure()接受三个参数：")]),e._v(" "),t("p",[e._v("第一个参数dependencies是一个数组，代表了当前require进来的模块的一些依赖；")]),e._v(" "),t("p",[e._v("第二个参数callback就是一个回调函数。其中需要注意的是，这个回调函数有一个参数require，通过这个require就可以在回调函数内动态引入其他模块。值得注意的是，虽然这个require是回调函数的参数，理论上可以换其他名称，但是实际上是不能换的，否则webpack就无法静态分析的时候处理它；")]),e._v(" "),t("p",[e._v("第三个参数errorCallback比较好理解，就是处理error的回调；\n第四个参数chunkName则是指定打包的chunk名称。")]),e._v(" "),t("hr"),e._v(" "),e._m(3),e._v(" "),t("p",[e._v("这里的import不同于模块引入时的import，可以理解为一个动态加载的模块的函数(function-like)，传入其中的参数就是相应的模块。例如对于原有的模块引入import react from 'react'可以写为import('react')。但是需要注意的是，import()会返回一个Promise对象。因此，可以通过如下方式使用：")]),e._v(" "),e._m(4),t("p",[e._v("可以看到，使用方式非常简单，和平时我们使用的Promise并没有区别。当然，也可以再加入一些异常处理：")]),e._v(" "),e._m(5),t("p",[e._v("当然，由于import()会返回一个Promise对象，因此要注意一些兼容性问题。解决这个问题也不困难，可以使用一些Promise的polyfill来实现兼容。可以看到，动态import()的方式不论在语意上还是语法使用上都是比较清晰简洁的。")]),e._v(" "),t("Valine")],1)},[function(){var e=this.$createElement,r=this._self._c||e;return r("h1",{attrs:{id:"js当中require-ensure-和import-的使用介绍及对比"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#js当中require-ensure-和import-的使用介绍及对比","aria-hidden":"true"}},[this._v("#")]),this._v(" js当中require.ensure()和import()的使用介绍及对比")])},function(){var e=this.$createElement,r=this._self._c||e;return r("h3",{attrs:{id:"require-ensure"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-ensure","aria-hidden":"true"}},[this._v("#")]),this._v(" require.ensure():")])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[this._v("require.ensure(dependencies: String[], callback: function(require), errorCallback: function(error), chunkName: String)\n")])]),this._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[this._v("1")]),r("br")])])},function(){var e=this.$createElement,r=this._self._c||e;return r("h3",{attrs:{id:"import"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#import","aria-hidden":"true"}},[this._v("#")]),this._v(" import():")])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    btn.addEventListener('click', e => {\n        // 在这里加载chat组件相关资源 chat.js\n        import('/components/chart').then(mod => {\n            someOperate(mod);\n        });\n    }); \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    btn.addEventListener('click', e => {\n        import('/components/chart').then(mod => {\n            someOperate(mod);\n        }).catch(err ＝> {\n            console.log('failed');\n        });\n    });\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])])}],!1,null,null,null);r.default=n.exports}}]);