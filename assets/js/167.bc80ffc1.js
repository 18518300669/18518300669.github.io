(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{224:function(s,e,n){"use strict";n.r(e);var t=n(0),a=Object(t.a)({},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),n("p",[s._v("Webpack进行打包，到底打了多少包，每个包有多大？webpack-bundle-analyzer这款插件可以帮助我们清晰展示。针对多余的包文件过大，剔除首次影响加载的效率问题进行剔除修改。")]),s._v(" "),s._m(3),s._v(" "),n("p",[s._v("模块功能：")]),s._v(" "),s._m(4),s._v(" "),n("p",[s._v("安装和使用:")]),s._v(" "),s._m(5),s._m(6),n("p",[s._v("默认的可选配置对象：")]),s._v(" "),s._m(7),n("p",[s._v("启动服务:")]),s._v(" "),n("p",[s._v("生产环境查看：npm run build --report 或 正常build 即可启动查看器\n开发环境查看：webpack -p --progress 或启动正常devServer服务即可启动查看器!")]),s._v(" "),n("p",[s._v("官方请看："),n("a",{attrs:{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack-bundle-analyzer"),n("OutboundLink")],1)]),s._v(" "),s._m(8),s._v(" "),n("p",[s._v("通过这个插件，我们可以清楚的看到，打包整体的时间，各plugin，loader处理时间，以有利于我们针对打包速度取做优化。")]),s._v(" "),s._m(9),s._v(" "),n("p",[s._v("安装和使用:")]),s._v(" "),s._m(10),s._m(11),n("p",[s._v("官方请看："),n("a",{attrs:{href:"https://github.com/stephencookdev/speed-measure-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("Speed Measure Plugin"),n("OutboundLink")],1)]),s._v(" "),s._m(12),s._v(" "),n("p",[s._v("先使用 Webpack 打包指令生成 Webpack stats 分析文件")]),s._v(" "),s._m(13),n("p",[s._v("然后到官方提供的网页上传stats.json")]),s._v(" "),n("p",[n("a",{attrs:{href:"http://webpack.github.io/analyse/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Webpack analyse"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("就可以通过一些可视化资料来分析打包结果")]),s._v(" "),s._m(14),s._v(" "),n("p",[s._v("官方请看："),n("a",{attrs:{href:"http://webpack.github.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack"),n("OutboundLink")],1)]),s._v(" "),s._m(15),s._v(" "),n("p",[s._v("列出了项目中较大的包，剩下的事情就是想办法如何减小这些包的体积（将一个大包拆成多个小包）。\n项目中产生较大的包的原因可以从两个方面去考虑：")]),s._v(" "),s._m(16),s._v(" "),n("p",[s._v("对于这两个问题，我们可以从两个方面着手解决：")]),s._v(" "),s._m(17),s._v(" "),n("p",[s._v("我们来讨论第一种方法，在不改动业务代码的情况下，如何减小公共依赖。")]),s._v(" "),s._m(18),s._v(" "),n("p",[s._v("具体做法：")]),s._v(" "),s._m(19),s._v(" "),n("p",[s._v("这些依赖需要满足一定的条件：")]),s._v(" "),s._m(20),s._v(" "),n("p",[s._v("常见的满足这类条件的包有：")]),s._v(" "),s._m(21),s._v(" "),s._m(22),s._v(" "),s._m(23),s._v(" "),n("p",[s._v("将抽离出来文件放到cnd上，注意，这些文件要是压缩版本，并且是用ES5编写的，否则浏览器报错。")]),s._v(" "),s._m(24),s._m(25),s._v(" "),n("p",[s._v("资源已经引入，接下来需要配置webpack，使其打包的时候不在将这些资源打包。")]),s._v(" "),s._m(26),n("p",[s._v("这里externals告诉webpack那些资源从哪里寻找。\n该对象的键表示 require 或者 import 时候的字符串\n值表示的当前环境下的变量，比如引入React之后，React被作为全局对象，webpack就回去寻找React对象。\n如果其中有一个找不到，打包就会失败。")]),s._v(" "),s._m(27),s._v(" "),n("p",[s._v("接下来配置vendor，使vendor也不打包该些JS")]),s._v(" "),s._m(28),s._m(29),s._v(" "),s._m(30),s._v(" "),s._m(31),s._v(" "),s._m(32),n("p",[s._v("webpack.DllPlugin选项：")]),s._v(" "),s._m(33),s._v(" "),n("p",[s._v("运行：")]),s._v(" "),s._m(34),n("p",[s._v("生成两个文件，一个是打包好的bundlejs，另外一个是bundle.mainifest.json，大致内容如下：")]),s._v(" "),s._m(35),s._m(36),s._v(" "),s._m(37),n("p",[s._v("webpack.DllReferencePlugin的选项中：")]),s._v(" "),s._m(38)])},[function(){var s=this.$createElement,e=this._self._c||s;return e("h1",{attrs:{id:"使用webpack打包的项目优化方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用webpack打包的项目优化方案","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用webpack打包的项目优化方案")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h2",{attrs:{id:"一、根据可视化工具查看项目打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、根据可视化工具查看项目打包","aria-hidden":"true"}},[this._v("#")]),this._v(" 一、根据可视化工具查看项目打包")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"webpack-bundle-analyzer可视化工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-bundle-analyzer可视化工具","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack-bundle-analyzer可视化工具")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[e("img",{attrs:{src:"/webpackBundle.jpg",alt:"webpack"}})])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ul",[n("li",[s._v("意识到你的文件打包压缩后中真正的内容")]),s._v(" "),n("li",[s._v("找出哪些模块组成最大的大小")]),s._v(" "),n("li",[s._v("找到错误的模块")]),s._v(" "),n("li",[s._v("优化它！")]),s._v(" "),n("li",[s._v("最好的事情是它支持缩小捆绑！它解析它们以获得实际大小的捆绑模块。它也显示他们的gzipped大小！")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install --save-dev webpack-bundle-analyzer\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("//在webpack.config.js中：\nlet BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\nmodule.exports = {\n    plugins: [new BundleAnalyzerPlugin()]\n}\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br"),e("span",{staticClass:"line-number"},[this._v("5")]),e("br")])])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("new BundleAnalyzerPlugin({\n  //  可以是`server`，`static`或`disabled`。\n  //  在`server`模式下，分析器将启动HTTP服务器来显示软件包报告。\n  //  在“静态”模式下，会生成带有报告的单个HTML文件。\n  //  在`disabled`模式下，你可以使用这个插件来将`generateStatsFile`设置为`true`来生成Webpack Stats JSON文件。\n  analyzerMode: 'server',\n  //  将在“服务器”模式下使用的主机启动HTTP服务器。\n  analyzerHost: '127.0.0.1',\n  //  将在“服务器”模式下使用的端口启动HTTP服务器。\n  analyzerPort: 8888,\n  //  路径捆绑，将在`static`模式下生成的报告文件。\n  //  相对于捆绑输出目录。\n  reportFilename: 'report.html',\n  //  模块大小默认显示在报告中。\n  //  应该是`stat`，`parsed`或者`gzip`中的一个。\n  //  有关更多信息，请参见“定义”一节。\n  defaultSizes: 'parsed',\n  //  在默认浏览器中自动打开报告\n  openAnalyzer: true,\n  //  如果为true，则Webpack Stats JSON文件将在bundle输出目录中生成\n  generateStatsFile: false,\n  //  如果`generateStatsFile`为`true`，将会生成Webpack Stats JSON文件的名字。\n  //  相对于捆绑输出目录。\n  statsFilename: 'stats.json',\n  //  stats.toJson（）方法的选项。\n  //  例如，您可以使用`source：false`选项排除统计文件中模块的来源。\n  //  在这里查看更多选项：https：  //github.com/webpack/webpack/blob/webpack-1/lib/Stats.js#L21\n  statsOptions: null,\n  logLevel: 'info' 日志级别。可以是'信息'，'警告'，'错误'或'沉默'。\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"speed-measure-plugin可视化工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#speed-measure-plugin可视化工具","aria-hidden":"true"}},[this._v("#")]),this._v(" Speed-Measure-Plugin可视化工具")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[e("img",{attrs:{src:"/webpackSpeed.jpg",alt:"webpackSpeed.jpg"}})])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install --save-dev speed-measure-webpack-plugin\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//webpack配置\nconst SpeedMeasurePlugin = require("speed-measure-webpack-plugin");\nconst smp = new SpeedMeasurePlugin();\nconst webpackConfig = smp.wrap({\n  plugins: [\n    new MyPlugin(),\n    new MyOtherPlugin()\n  ]\n});\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"analyse"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#analyse","aria-hidden":"true"}},[this._v("#")]),this._v(" analyse")])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("webpack --profile --json > stats.json\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[e("img",{attrs:{src:"/webpackAnalyse.jpg",alt:"webpackAnalyse.jpg"}})])},function(){var s=this.$createElement,e=this._self._c||s;return e("h2",{attrs:{id:"二、webpack外部扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、webpack外部扩展","aria-hidden":"true"}},[this._v("#")]),this._v(" 二、webpack外部扩展")])},function(){var s=this.$createElement,e=this._self._c||s;return e("ol",[e("li",[this._v("项目中引入的依赖包过于庞大；")]),this._v(" "),e("li",[this._v("业务代码集中在一块写，或者是业务代码写的比较繁琐；")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("ol",[e("li",[this._v("抽离项目中公共依赖的、不常变动的、体积较大的包；")]),this._v(" "),e("li",[this._v("将一个较大的业务代码文件，拆成多个较小的文件，异步加载（或者优化业务代码）。")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("要知道这些依赖是我们需要的，不可能排除不引入。\n但是他们都是全局依赖的，万年不变的，可以使用浏览器自己的缓存来实现不重复加载。\n具体做法就是："),e("br"),this._v("\n将项目中需要的一些公共依赖包，并且不常变动的，单独取出，不再每次都打包编译（如React，Redux等）。\n而是通过使用script标签形式cdn引入，这样在有缓存的情况下，这些资源均走缓存，不必加载。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"总结需要抽离的公共依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结需要抽离的公共依赖","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结需要抽离的公共依赖")])},function(){var s=this.$createElement,e=this._self._c||s;return e("ul",[e("li",[this._v("体积较大；")]),this._v(" "),e("li",[this._v("不常更新；")]),this._v(" "),e("li",[this._v("依赖较多；")]),this._v(" "),e("li",[this._v("是前置依赖；")])])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ul",[n("li",[s._v("react")]),s._v(" "),n("li",[s._v("react-dom")]),s._v(" "),n("li",[s._v("redux")]),s._v(" "),n("li",[s._v("react-redux")]),s._v(" "),n("li",[s._v("moment")]),s._v(" "),n("li",[s._v("jquery")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("另外一些包文件如 Antd库文件，整个包较大，但是每次用什么取什么的话，库文件也会按需加载，不必单独取出。"),e("br"),this._v("\n还有这类库文件不建议单独取出，因为里面可能会有bug，需要更新。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"使用cdn引入资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用cdn引入资源","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用CDN引入资源")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<head>\n  <title>React Starter Kit</title>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  \x3c!-- 体积较大的包 --\x3e\n  <script src="https://cdn.bootcss.com/react/15.0.0/react-with-addons.min.js"><\/script>\n  <script src="https://cdn.bootcss.com/react/15.0.0/react-dom.min.js"><\/script>\n  <script src="https://cdn.bootcss.com/react-router/3.0.0/ReactRouter.min.js"><\/script>\n  <script src="https://cdn.bootcss.com/redux/3.6.0/redux.min.js"><\/script>\n  <script src="https://cdn.bootcss.com/react-redux/5.0.1/react-redux.min.js"><\/script>\n  <script src="https://cdn.bootcss.com/history/4.5.0/history.min.js"><\/script>\n</head>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"配置webpack-conf-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置webpack-conf-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置webpack.conf.js")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const webpackConfig = {\n    name: 'client',\n    target: 'web',\n    devtool: config.compiler_devtool,\n    resolve: {\n        root: paths.client(),\n        extensions: ['', '.js', '.jsx', '.json'],\n    },\n    externals: {\n        'react': 'React',\n        'react-dom': 'ReactDOM',\n        'react-router': 'ReactRouter',\n        'redux': 'Redux',\n        'history': 'History'\n    },\n    module: {},\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"配置vendor-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置vendor-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置vendor.js")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("compiler_vendors : [\n    // 'react',\n    // 'react-redux',\n    // 'react-router',\n    // 'redux',\n],\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h2",{attrs:{id:"三、dll方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、dll方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 三、DLL方式")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("dll 全称是：dynamic link library（动态链接库）"),e("br"),this._v("\ndll方式也就是通过配置，告诉webpack指定库在项目中的位置，从而直接引入，不将其打包在内。"),e("br"),this._v("\n上面介绍的方式是将包放到cdn上，build的时候不在引入对应的包；\ndll方式就是指定包在项目中，build的时候不在打包对应的包，使用的时候引入。"),e("br"),this._v("\nwebpack通过webpack.DllPlugin与webpack.DllReferencePlugin两个内嵌插件实现此功能。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"新建webpack-dll-config-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建webpack-dll-config-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 新建webpack.dll.config.js")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const webpack = require('webpack');\n\nmodule.exports = {\n    entry: {\n        bundle: [\n            'react',\n            'react-dom',\n            //其他库\n            ],\n    },\n    output: {\n        path: './build',\n        filename: '[name].js',\n        library: '[name]_library'\n    },\n    plugins: [\n        new webpack.DllPlugin({\n            path: './build/bundle.manifest.json',\n            name: '[name]_library',\n        })\n    ]\n};\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("ul",[e("li",[this._v("path：manifest.json文件的输出路径，这个文件会用于后续的业务代码打包；")]),this._v(" "),e("li",[this._v("name：dll暴露的对象名，要跟output.library保持一致;")]),this._v(" "),e("li",[this._v("context：解析包路径的上下文，这个要跟接下来配置的 webpack.config.js 一致。")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("\twebpack --config webpack.dll.config.js\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "bundle_library",\n  "content": {\n    "./node_modules/react/react.js": 1,\n    "./node_modules/react/lib/React.js": 2,\n    "./node_modules/process/browser.js": 3,\n    "./node_modules/object-assign/index.js": 4,\n    "./node_modules/react/lib/ReactChildren.js": 5,\n    "./node_modules/react/lib/PooledClass.js": 6,\n    "./node_modules/react/lib/reactProdInvariant.js": 7,\n    //其他引用\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"配置webpack-config-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置webpack-config-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置webpack.config.js")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const webpack = require('webpack');\nvar path = require('path');\nmodule.exports = {\n  entry: {\n    main: './main.js',\n  },\n  output: {\n    path: path.join(__dirname, \"build\"),\n    publicPath: './',\n    filename: '[name].js'\n  },\n  module: {\n    loaders:[\n      { test: /\\.(png|jpg)$/, loader: 'url-loader?limit=8192'},\n      {\n        test: /\\.jsx?$/,\n        loaders: ['babel-loader?presets[]=es2015&presets[]=react'],\n        include: path.join(__dirname, '.')\n      }\n    ]\n  },\n  plugins: [\n     new webpack.DllReferencePlugin({\n      context: '.',\n      manifest: require(\"./build/bundle.manifest.json\"),\n        }),\n  ]\n};\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("ul",[e("li",[this._v("context：需要跟之前保持一致，这个用来指导webpack匹配")]),this._v(" "),e("li",[this._v("manifest.json中库的路径；")]),this._v(" "),e("li",[this._v("manifest：用来引入刚才输出的manifest.json文件。")])])}],!1,null,null,null);e.default=a.exports}}]);